<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>T9 Translator · PLNT Earth</title>
<meta name="theme-color" content="#0b0f19">
<style>
:root{
  --bg:#0b0f19;
  --ink:#e6e8ee;
  --muted:#a3acc2;
  --card:rgba(255,255,255,0.06);
  --accent:#c4b5fd;
}
html,body{
  margin:0;
  padding:0;
  background:var(--bg);
  color:var(--ink);
  font-family:system-ui,sans-serif;
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
}
#app{
  background:var(--card);
  backdrop-filter:blur(12px);
  border-radius:24px;
  padding:24px;
  width:320px;
  max-width:90%;
  text-align:center;
  box-shadow:0 0 30px rgba(0,0,0,0.4);
}
h1{
  font-size:18px;
  margin-bottom:12px;
  color:var(--accent);
}
#modeToggle{
  background:var(--accent);
  color:var(--bg);
  border:none;
  border-radius:20px;
  padding:8px 16px;
  font-weight:600;
  cursor:pointer;
  margin-bottom:16px;
}
#display{
  width:100%;
  background:rgba(255,255,255,0.08);
  border:none;
  border-radius:8px;
  padding:12px;
  color:var(--ink);
  font-size:16px;
  text-align:center;
  margin-bottom:12px;
}
.pad{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:8px;
  margin-bottom:12px;
}
button.key{
  background:rgba(255,255,255,0.1);
  border:none;
  border-radius:12px;
  padding:16px 0;
  color:var(--ink);
  font-size:18px;
  cursor:pointer;
  transition:background 0.2s,transform 0.1s;
}
button.key:active{
  background:var(--accent);
  color:var(--bg);
  transform:scale(0.96);
}
.key span{
  display:block;
  font-size:12px;
  color:var(--muted);
}
#output{
  background:rgba(255,255,255,0.05);
  border-radius:8px;
  padding:10px;
  font-size:14px;
  color:var(--muted);
  min-height:30px;
  margin-bottom:10px;
  word-break:break-all;
}
.controls{
  display:flex;
  justify-content:space-between;
}
.controls button{
  flex:1;
  margin:0 4px;
  background:rgba(255,255,255,0.08);
  border:none;
  border-radius:8px;
  padding:8px;
  color:var(--ink);
  cursor:pointer;
  font-weight:600;
}
.controls button:active{
  background:var(--accent);
  color:var(--bg);
}
</style>
</head>
<body>
<div id="app">
  <h1>T9 Translator · PLNT Earth</h1>
  <button id="modeToggle">Mode: Encode</button>
  <input id="display" placeholder="Type letters or tap numbers">
  <div class="pad">
    <button class="key" data-num="1">1</button>
    <button class="key" data-num="2">2<span>ABC</span></button>
    <button class="key" data-num="3">3<span>DEF</span></button>
    <button class="key" data-num="4">4<span>GHI</span></button>
    <button class="key" data-num="5">5<span>JKL</span></button>
    <button class="key" data-num="6">6<span>MNO</span></button>
    <button class="key" data-num="7">7<span>PQRS</span></button>
    <button class="key" data-num="8">8<span>TUV</span></button>
    <button class="key" data-num="9">9<span>WXYZ</span></button>
    <button class="key" data-num="*">*</button>
    <button class="key" data-num="0">0</button>
    <button class="key" data-num="#">#</button>
  </div>
  <div id="output"></div>
  <div class="controls">
    <button id="clearBtn">Clear</button>
    <button id="copyBtn">Copy</button>
  </div>
</div>
<script>
const display=document.getElementById('display');
const output=document.getElementById('output');
const modeToggle=document.getElementById('modeToggle');
const clearBtn=document.getElementById('clearBtn');
const copyBtn=document.getElementById('copyBtn');
const padKeys=document.querySelectorAll('.key');
let mode=localStorage.getItem('t9mode')||'encode';
let inputCache=localStorage.getItem('t9input')||'';
display.value=inputCache;
updateModeText();
translate();

const t9map={
  2:['A','B','C'],3:['D','E','F'],4:['G','H','I'],
  5:['J','K','L'],6:['M','N','O'],
  7:['P','Q','R','S'],8:['T','U','V'],9:['W','X','Y','Z']
};
const letterToNum={};
for(const [num,letters] of Object.entries(t9map)){
  for(const l of letters) letterToNum[l]=num;
}

function updateModeText(){
  modeToggle.textContent='Mode: '+(mode==='encode'?'Encode':'Decode');
}
function translate(){
  const val=display.value.toUpperCase();
  if(mode==='encode'){
    let res='';
    for(const ch of val){
      res+=letterToNum[ch]||ch;
    }
    output.textContent=res;
  }else{
    const combos=[''];
    for(const digit of val){
      const letters=t9map[digit];
      if(!letters){for(let i in combos)combos[i]+=digit;continue;}
      const newCombos=[];
      for(const prefix of combos){
        for(const l of letters)newCombos.push(prefix+l);
      }
      combos.splice(0,combos.length,...newCombos);
      if(combos.length>1000)break;
    }
    output.textContent=combos.slice(0,50).join(' ');
  }
  localStorage.setItem('t9input',display.value);
}
modeToggle.onclick=()=>{
  mode=mode==='encode'?'decode':'encode';
  localStorage.setItem('t9mode',mode);
  updateModeText();
  translate();
};
display.oninput=translate;
padKeys.forEach(btn=>{
  btn.onclick=()=>{
    display.value+=btn.dataset.num||'';
    translate();
  };
});
clearBtn.onclick=()=>{
  display.value='';
  output.textContent='';
  localStorage.removeItem('t9input');
};
copyBtn.onclick=()=>{
  navigator.clipboard.writeText(output.textContent);
};
</script>
</body>
</html>
